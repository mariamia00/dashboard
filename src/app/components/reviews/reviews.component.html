<!-- src/app/reviews/reviews.component.html -->
<div class="bg-gray-300 text-gray-800">
  <nav class="container mx-auto px-4 py-2 flex items-center justify-between">
    <div class="flex space-x-4 cursor-pointer text-gray-800">
      <a (click)="setFilter('pending')" class="hover:underline"
        >Pending Reviews</a
      >
      <a (click)="setFilter('approved')" class="hover:underline"
        >Approved Reviews</a
      >
      <a (click)="setFilter('rejected')" class="hover:underline"
        >Rejected Reviews</a
      >
    </div>
    <div class="relative">
      <input
        type="text"
        placeholder="Search all reviews..."
        class="border border-gray-300 rounded-lg py-2 px-4 w-80 focus:outline-none focus:ring-2 focus:ring-indigo-500"
      />
      <svg
        class="absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        stroke="currentColor"
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        viewBox="0 0 24 24"
      >
        <circle cx="11" cy="11" r="8"></circle>
        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
    </div>
  </nav>
</div>

<section class="text-gray-600 body-font">
  <div class="container px-5 pt-5 pb-10 mx-auto">
    <div class="flex flex-col items-center text-center my-8">
      <h1 class="sm:text-3xl text-2xl font-medium title-font text-gray-900">
        {{ currentFilter | titlecase }} Reviews
      </h1>
    </div>
    <!-- Conditional message for no reviews -->
    <div
      *ngIf="reviews.length === 0"
      class="flex justify-center items-center h-64"
    >
      <p class="text-gray-500 text-xl">There is nothing to see</p>
    </div>
    <!-- Display reviews if available -->
    <div *ngIf="reviews.length > 0" class="flex flex-wrap -m-4">
      <div *ngFor="let review of reviews" class="lg:w-1/3 lg:mb-0 mb-6 p-4">
        <div
          class="h-full text-center border-2 border-gray-200 px-4 py-6 rounded-lg relative"
        >
          <div
            class="absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gray-500 text-white text-xs font-semibold px-2 py-1 rounded-full"
          >
            {{ review.status | titlecase }}
          </div>
          <img
            alt="testimonial"
            class="w-32 h-32 mb-8 object-cover object-center rounded-full inline-block border-2 border-gray-200 bg-gray-100 mt-4"
            [src]="review.imageUrl"
          />
          <h2
            class="text-gray-900 font-medium title-font tracking-wider text-sm"
          >
            {{ review.name }}
          </h2>
          <p class="text-gray-500">{{ review.timestamp | date }}</p>
          <p>{{ "â˜…".repeat(review.rating) }}</p>
          <p class="leading-relaxed overflow-hidden text-sm">
            {{ review.comment }}
          </p>
          <div class="flex items-center flex-wrap mt-4 space-x-2 text-sm">
            <button
              (click)="approveReview(review.id)"
              class="bg-green-500 text-white font-bold py-2 px-4 rounded hover:bg-green-600"
            >
              Approve
            </button>
            <button
              (click)="rejectReview(review.id)"
              class="bg-orange-500 text-white font-bold py-2 px-4 rounded hover:bg-red-600"
            >
              Reject
            </button>
            <button
              (click)="deleteReview(review.id)"
              class="bg-red-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-600"
            >
              Delete
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
